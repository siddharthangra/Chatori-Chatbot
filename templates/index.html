<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dummy Food & Co. - Order with Chatori</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <h1><i class="fas fa-utensils"></i> Dummy Food & Co.</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="#menu" class="nav-link">Menu</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Welcome to Dummy Food & Co.</h1>
            <p>üçï Delicious food at your fingertips! Meet <strong>Chatori</strong>, your AI food assistant who will help you order, get recommendations, and answer all your food questions!</p>
            <button class="cta-button" onclick="toggleChatbot()">
                <i class="fas fa-robot"></i> Chat with Chatori Now!
            </button>
        </div>
    </section>


    <!-- Menu Section -->
    <section id="menu" class="menu">
        <div class="container" style="max-width: 800px; margin: 0 auto;">
            <h2 class="section-title" style="text-align: center;">üçΩÔ∏è Menu</h2>
            <div class="menu-card" style="background: #fff; border-radius: 1rem; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                {% for item in food_items %}
                <div class="menu-item" style="display: flex; align-items: center; margin-bottom: 1.5rem; border-bottom: 1px solid #eee; padding-bottom: 1rem;">
                    <!-- Food image -->
                    <img src="/static/images/{{ item.name | replace(' ', '_') | lower }}.jpg" 
                        alt="{{ item.name }}" 
                        style="width: 60px; height: 60px; object-fit: cover; border-radius: 0.5rem; margin-right: 1rem;">
                    
                    <!-- Food details -->
                    <div style="flex: 1;">
                        <div class="item-name" style="font-weight: 600; color: #b91c1c; margin-bottom: 0.25rem;">{{ item.name }}</div>
                        <div class="item-price" style="color: #f59e0b; font-weight: 600; font-size: 1.1rem;">‚Çπ{{ item.price }}</div>
                    </div>

                    <!-- Rating section -->
                    {% if item.avg_rating is not none %}
                    <div style="text-align: right; font-size: 0.9rem; display: flex; flex-direction: column; align-items: flex-end;">
                        <span style="color: #f59e0b; font-weight: bold;">‚≠ê {{ item.avg_rating }}</span>
                        {% if item.rating_count > 0 %}
                            <span style="color: #888; margin-top: 0.25rem;">{{ item.rating_count }} rating{{ 's' if item.rating_count > 1 else '' }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>



    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <p>123 Food Street, Lucknow, UP</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <p>+91 *****-*****</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-clock"></i>
                    <p>10:00 AM - 11:00 PM</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Dummy Food & Co. All rights reserved. | Powered by Chatori AI</p>
        </div>
    </footer>

    
    <df-messenger
        intent="WELCOME"
        chat-title="Chatori"
        agent-id="d280b997-e427-42a9-ab93-a10738ca77b4"
        language-code="en"
    ></df-messenger>

    <script>

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Smooth scrolling for nav links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        function toggleChatbot() {
            const dfMessenger = document.querySelector('df-messenger');
            if (dfMessenger) {
                // Method 1: Trigger click on the chat icon (works in most cases)
                dfMessenger.shadowRoot.querySelector('.chat-icon').click();
            
                // Method 2 (fallback): Set the 'open' attribute
                // dfMessenger.setAttribute('open', 'true');
            }       
            else {
            console.error("Dialogflow Messenger not loaded!");
                }   
        }
    </script>
</body>
</html>